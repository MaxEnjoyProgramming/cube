!function(e,t){function n(){}function r(e){var t=e.indexOf(l);return t>0?c[e.substr(0,t)]+e.substr(t+1):null}function o(e,t,n){if(3===arguments.length){var r=new o(e);r.load(t,n)}else this.name=e?e:"_",this.base=u,this.charset=f}function s(e,t){if(void 0!==t){var n=b[e];o.css(n,t,e)}return b[e]}function i(e,t,n){if("function"!=typeof t){if(!m)return void console.warn("[Cube] dynamic loading css disabled!");o.use(e,function(r){o.css(r,t,e),n&&n(r)})}else o.use(e,t)}function a(e){var t,n={},r=y[e];if(r){for(var o=r.length-1;o>=0;o--)t=r[o](e),t&&(r.splice(o,1),n[t]=!0,o=r.length);r.length||delete y[e];for(o in n)a(o)}}var u="",c={},l=":",f="utf-8",d=(new Date).getTime(),h=1e4,m=!1,p=document.getElementsByTagName("head")[0],v=1,g=0,b={},y={},_={},C={};o.toString=function(){return"Cube:v1.0.0-beta.0"},o.init=function(e){if(e.base&&"/"!==e.base&&(u=e.base.replace(/\/$/,"")),e.remoteBase)for(var t in e.remoteBase)c[t]=e.remoteBase[t].replace(/\/$/,"");return e.charset&&(f=e.charset),e.version&&(d=e.version),e.timeout&&(h=e.timeout),e.enableCss&&(m=e.enableCss),this},o.use=function(e,t){if(!e)throw new Error("Cube.use(moduleName) moduleName is undefined!");t||(t=n),-1===e.indexOf(l)&&(0===e.indexOf("./")?e=e.substr(1):"/"!==e[0]&&(e="/"+e));var r=new o;return y[r.name]=[],y[r.name].module={exports:{}},r.load(e,function(n,r,o){t(o(e))}),this},o.css=function(){},o.remove=function(e){delete b[e]},o.register=function(e,t){var n=b[e];n?console.error("module already registered:",e):b[e]=t},o._cached=b,o._flag=y,o._rtree=C,o._tree=_,o.module=function(e){return this.CACHED[e]},o.prototype={load:function(e,t){"string"==typeof e&&setTimeout(function(){y[e]&&console.error("load script timeout:",e)},h),e?"string"==typeof e&&(e=[e]):e=[];var n=e.length;if(this.loadStack={total:n,cb:t,count:0},n)for(var r=0;n>r;r++)this._loadScript(e[r]);else this._leafMod(t)},_leafMod:function(t){var n,r=this.name,o=y[r].module;t&&(n=t.apply(e,[o,o.exports,s,i,"",""])),n||(n=!0),b[r]=n,y[r].status=g,a(r)},_checkCycle:function(e,t){t||(t=[e]);var n,r,o=C[e];if(!o)return!1;for(var s in o){if(-1!==t.indexOf(s))return t.unshift(s),console.warn("[WARNNING]","cycle require : "+t.join(" > ")),!0;if(n=t.slice(0),n.unshift(s),r=this._checkCycle(s,n))return!0}return!1},_loadScript:function(t){function n(t,n){var r,o=c.loadStack,a=null,u=y[t];if(u&&u.status&&!n||o.count++,o.total===o.count){var l=y[f].module;o.cb&&(r=o.cb.apply(e,[l,l.exports,s,i,f,d])),r||(r=!0),b[f]=r,y[f]&&(y[f].status=g),a=f}return a}var r,o=b[t],u=y[t],c=this,l={exports:{}},f=this.name,d=f.replace(/[^\/]*$/,"");C[t]||(C[t]={}),C[t][this.name]=!0,o?u&&u.status?this._checkCycle(t)?(r=n(t,!0),r&&a(r)):(c.loadStack.deps.push(t),u.push(n)):(console.log(">>> module already ready",t),r=n(t),r&&a(r)):(y[t]=u=[],u.status=v,u.module=l,u.push(n),b[t]=l.exports,this._genScriptTag(t))},_genScriptTag:function(e){if("/"!==e[0])return console.error("[CUBE] module not found:",e,", should install module in server side, or register(mod) in client side");var t=p.appendChild(document.createElement("script"));t.type="text/javascript",t.async="true",t.charset=this.charset;var n=[r(e)||this.base+e,"?m=1&",d].join("");t.src=n}},t=t||"Cube",e[t]?console.log("window."+t+' already in using, replace the last "null" param in cube.js'):e[t]=o}(window,null);