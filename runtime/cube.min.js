/*!
 * Cube v2.0.0-alpha.2
 */
!function(e,r){function t(){}function n(e,r){if(1===arguments.length)return c.fireModule(e);var t=c.fireModule(e);o.css(t,r,e)}function a(e,r,t){2===arguments.length&&"function"==typeof r?(t=r,r=null,o.use(e,t)):o.use(e,function(n){n=o.css(n,r,e),t&&t(n)})}function o(e,r,t){if(3===arguments.length){i.built&&!s[e]&&(s[e]={exports:{},loaded:!1,fired:!1});var n=s[e];n.fn=t,n.loaded=!0,i.built||c.load(r)}}var i={base:"",remoteBase:{},remoteSeparator:":",charset:"utf-8",version:+new Date,entrances:{},built:!1},s={},u=document.querySelector("head"),l=!1,c={reBase:function(e){var r=e.indexOf(i.remoteSeparator);return r>0?i.remoteBase[e.substr(0,r)]+e.substr(r+1):""},fixUseModPath:function(e){"string"==typeof e&&(e=[e]);for(var r,t=e.length,n=0;t>n;n++)r=e[n],-1===r.indexOf(i.remoteSeparator)&&(0===r.indexOf("./")?r=r.substr(1):"/"!==r[0]&&(r="/"+r));return e},checkAllDownloaded:function(){var e=0;for(var r in s)s[r].loaded||e++;return e},load:function(e){"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!s[e]){var r=document.createElement("script");r.type="text/javascript",r.async="true",r.charset=i.charset;var t=c.reBase(e),n=[t||i.base+e,"?m=1&",i.version].join("");r.src=n,u.appendChild(r),s[e]={exports:{},loaded:!1,fired:!1}}}),0===c.checkAllDownloaded()&&c.startAppAndCallback()},fireModule:function(r){var t=s[r];return t.fired||(t.fired=!0,t.exports=t.fn.apply(e,[t,t.exports,n,a])),t.exports},startAppAndCallback:function(){if(!l){l=!0;var e,r,t=i.entrances;for(e in t)r=e.split(","),r.forEach(function(r){var n=0;c.fireModule(r),t[e].forEach(function(e){var t=e(s[r].exports);t&&n++}),t[e].length===n&&delete t[e]});l=!1}}};o.init=function(e){if(e.base&&"/"!==e.base&&(i.base=e.base.replace(/\/$/,"")),e.remoteBase)for(var r in e.remoteBase)i.remoteBase[r]=e.remoteBase[r].replace(/\/$/,"");e.charset&&(i.charset=e.charset),e.version&&(i.version=e.version),e.built&&(i.built=e.built)},o.use=function(r,n){if(!r)throw new Error("Cube.use(moduleName) moduleName is undefined!");n=n||t,r=c.fixUseModPath(r),c.load(r),i.entrances[r]||(i.entrances[r]=[]),i.entrances[r].push(function(){var t=[],a=r.length;return function(r){return t.push(r),t.length===a?(n.apply(e,t),!0):void 0}}()),0===c.checkAllDownloaded()&&c.startAppAndCallback()},o.register=function(e,r){return s[e]?console.error("module already registered:",e):void(s[e]={exports:r,fn:t,loaded:!0,fired:!0})};var f=/([^};]+)(\{[^}]+\})/g,d={};o.css=function(e,r,t){if(e){var n=t+"@"+r;if(!d[n]){d[n]=!0,r&&(e=e.replace(f,function(e,t,n){var a=t.split(",").map(function(e){return r+" "+e.trim()});return a.join(",")+n}));var a=document.createElement("style");return a.setAttribute("type","text/css"),a.setAttribute("mod",t),r&&a.setAttribute("ns",r),u.appendChild(a),a.innerHTML=e,e}}},r=r||"Cube",e[r]?console.log("window."+r+' already in using, replace the last "null" param in cube.js'):e[r]=o}(window,null);