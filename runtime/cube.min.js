!function(e,t){function n(e,t,r){if(3===arguments.length){var a=new n(e);a.load(t,r)}else this.name=e?e:"_",this.base=c,this.charset=o}function r(e){return n._cached[e]}function a(e,t){n.use(e,t)}function i(e){var t,r,a=n._flag,c={};if(t=a[e]){for(var o=t.length-1;o>=0;o--)r=t[o](e),r!==!1&&(t.splice(o,1),o=t.length,r&&(c[r]=!0));t.length||delete a[e];for(o in c)i(o)}}var c="",o="utf-8",s=(new Date).getTime(),u=1e4,l=!1;n.init=function(e){return e.base&&"/"!==e.base&&(c=e.base),e.charset&&(o=e.charset),e.version&&(s=e.version),e.debug&&(l=e.debug),e.timeout&&(u=e.timeout),this},n.source=function(){},n.use=function(e,t){if(!e)throw new Error("Cube.use(moduleName) moduleName is undefined!");var r=new n;return r.load(e,function(n,r,a){t(a(e))}),this},n.css=function(){},n.remove=function(){},n.register=function(e,t){var n=this._cached[e];n?console.error("module already registered:",e):this._cached[e]=t},n._cached={},n._flag={},n._tree={},n.module=function(e){return this._cached[e]},n.prototype={load:function(e,t){var r=this.name;"string"==typeof e&&setTimeout(function(){var t=!1;for(var a in n._flag){t=!0;break}t&&console.error("load script timeout:",e,r)},u),e?"string"==typeof e&&(e=[e]):e=[];var a=e.length,i=[],c=!1;if(this._load_stack={req:i,total:a,cb:t,count:0},a){for(var o,s=0;a>s;s++)o=e[s],l&&(n._tree[o]||(n._tree[o]={}),n._tree[o][r]=!0,c=this._checkCycle(o)),c||(i.push(o),this._loadScript(o));i.length||this._leafMod(t)}else this._leafMod(t)},_leafMod:function(t){var c,o={exports:{}};t&&(c=t.apply(e,[o,o.exports,r,a,"",""])),c?c.__filename=this.name:c=!0,n._cached[this.name]=c,i(this.name)},_checkCycle:function(e,t){t||(t=[e]);var r,a,i=n._tree[e];if(!i)return!1;for(var c in i){if(-1!==t.indexOf(c))return t.unshift(c),console.warn("[WARNNING]","cycle require : "+t.join(" > ")),!0;if(r=t.slice(0),r.unshift(c),a=this._checkCycle(c,r))return!0}return!1},_loadScript:function(t){function c(t){var i=u._load_stack,c=!1;if(n._cached[t]&&(i.count++,c=u.name),i.total<=i.count){var o,s={exports:{}},l=u.name,h=l.replace(/[^\/]*$/,"");i.cb&&(o=i.cb.apply(e,[s,s.exports,r,a,l,h])),o?o.__filename=u.name:o=!0,n._cached[u.name]=o}return c}var o=n._cached[t],u=this,l=n._flag;if(o)return l=c(t),void(l!==!1&&i(l));if(o===!1)return void l[t].push(c);l[t]||(l[t]=[]),l[t].push(c),n._cached[t]=!1;var h=document.getElementsByTagName("head")[0].appendChild(document.createElement("script"));h.type="text/javascript",h.async="true",h.charset=this.charset;var f=[this.base,t,"?m=1&",s];h.src=f.join("")}},t=t?t:"Cube",e[t]?console.log("window."+t+' already in using, replace the last "null" param in cube.js'):e[t]=n}(window,null);