/*!
 * Cube v2.0.0-alpha.2
 */
!function(e,r){function t(){}function n(e,r){if(1===arguments.length)return l.fireModule(e);var t=l.fireModule(e);a.css(t,r,e)}function o(e,r,t){2===arguments.length&&"function"==typeof r?(t=r,r=null,a.use(e,t)):a.use(e,function(n){n=a.css(n,r,e),t&&t(n)})}function a(e,r,t){var n=!1;if(3===arguments.length){i[e]||(i[e]={exports:{},loaded:!1,fired:!1},n=!0,r.length&&console.info("Cube "+r+" should exist."));var o=i[e];o.fn=t,o.loaded=!0,n||l.load(r)}}var s={base:"",remoteBase:{},remoteSeparator:":",charset:"utf-8",version:+new Date,entrances:{}},i={},u=document.querySelector("head"),c=!1,l={reBase:function(e){var r=e.indexOf(s.remoteSeparator);return r>0?s.remoteBase[e.substr(0,r)]+e.substr(r+1):""},fixUseModPath:function(e){"string"==typeof e&&(e=[e]);for(var r,t=e.length,n=0;t>n;n++)r=e[n],-1===r.indexOf(s.remoteSeparator)&&(0===r.indexOf("./")?r=r.substr(1):"/"!==r[0]&&(r="/"+r));return e},checkAllDownloaded:function(){var e=0;for(var r in i)i[r].loaded||e++;return e},load:function(e){"string"==typeof e&&(e=[e]),e.forEach(function(e){if(!i[e]){var r=document.createElement("script");r.type="text/javascript",r.async="true",r.charset=s.charset;var t=l.reBase(e),n=[t||s.base+e,"?m=1&",s.version].join("");r.src=n,u.appendChild(r),i[e]={exports:{},loaded:!1,fired:!1}}}),0===l.checkAllDownloaded()&&l.startAppAndCallback()},fireModule:function(r){var t=i[r];return t.fired||(t.fired=!0,t.exports=t.fn.apply(e,[t,t.exports,n,o])),t.exports},startAppAndCallback:function(){if(!c){c=!0;var e,r,t=s.entrances;for(e in t)r=e.split(","),r.forEach(function(r){var n=0;l.fireModule(r),t[e].forEach(function(e){var t=e(i[r].exports);t&&n++}),t[e].length===n&&delete t[e]});c=!1}}};a.init=function(e){if(e.base&&"/"!==e.base&&(s.base=e.base.replace(/\/$/,"")),e.remoteBase)for(var r in e.remoteBase)s.remoteBase[r]=e.remoteBase[r].replace(/\/$/,"");return e.charset&&(s.charset=e.charset),e.version&&(s.version=e.version),this},a.use=function(r,n){if(!r)throw new Error("Cube.use(moduleName) moduleName is undefined!");return n=n||t,r=l.fixUseModPath(r),l.load(r),s.entrances[r]||(s.entrances[r]=[]),s.entrances[r].push(function(){var t=[],o=r.length;return function(r){return t.push(r),t.length===o?(n.apply(e,t),!0):void 0}}()),0===l.checkAllDownloaded()&&l.startAppAndCallback(),this},a.register=function(e,r){return i[e]?console.error("module already registered:",e):(i[e]={exports:r,fn:t,loaded:!0,fired:!0},this)};var f=/([^};]+)(\{[^}]+\})/g,d={};a.css=function(e,r,t){if(e){var n=t+"@"+r;if(!d[n]){d[n]=!0,r&&(e=e.replace(f,function(e,t,n){var o=t.split(",").map(function(e){return r+" "+e.trim()});return o.join(",")+n}));var o=document.createElement("style");return o.setAttribute("type","text/css"),o.setAttribute("mod",t),r&&o.setAttribute("ns",r),u.appendChild(o),o.innerHTML=e,e}}},r=r||"Cube",e[r]?console.log("window."+r+' already in using, replace the last "null" param in cube.js'):e[r]=a}(window,null);