!function(e,t){function n(e,t,a){if(3===arguments.length){var r=new n(e);r.load(t,a)}else this.name=e?e:"_",this.base=o,this.charset=i}function a(e){return n._cached[e]}function r(e,t,a){if(/\.css(\.js)?$/.test(e)){if(!d)return void console.warn("[Cube] dynamic loading css disabled!");n.use(e,function(r){"function"==typeof t?t(r):(n.css(r,t,e),a&&a())})}else n.use(e,t)}function c(e){var t,a,r=n._flag,o={};if(t=r[e]){for(var i=t.length-1;i>=0;i--)a=t[i](e),a!==!1&&(t.splice(i,1),i=t.length,a&&(o[a]=!0));t.length||delete r[e];for(i in o)c(i)}}var o="",i="utf-8",s=(new Date).getTime(),u=1e4,l=!1,d=!1,_=window.localStorage?window.localStorage.getItem("__cube_debug__"):!1;n.init=function(e){return e.base&&"/"!==e.base&&(o=e.base.replace(/\/$/,"")),e.charset&&(i=e.charset),e.version&&(s=e.version),e.debug&&(l=e.debug),e.timeout&&(u=e.timeout),e.enableCss&&(d=e.enableCss),this},n.debug=function(){if(window.localStorage){var e=localStorage.getItem("__cube_debug__");e?localStorage.removeItem("__cube_debug__"):localStorage.setItem("__cube_debug__",!0)}},n.use=function(e,t){if(!e)throw new Error("Cube.use(moduleName) moduleName is undefined!");var a=new n;return a.load(e,function(n,a,r){t(r(e))}),this},n.css=function(){},n.remove=function(){},n.register=function(e,t){var n=this._cached[e];n?console.error("module already registered:",e):this._cached[e]=t},n._cached={},n._flag={},n._tree={},n.module=function(e){return this._cached[e]},n.prototype={load:function(e,t){var a=this.name,r=e;"string"==typeof r&&setTimeout(function(){n._flag[e]&&console.error("load script timeout:",e)},u),r?"string"==typeof r&&(r=[r]):r=[];var c=r.length,o=[],i=!1;if(this._load_stack={req:o,total:c,cb:t,count:0},c){for(var s,d=0;c>d;d++)s=r[d],l&&(n._tree[s]||(n._tree[s]={}),n._tree[s][a]=!0,i=this._checkCycle(s)),i||(o.push(s),this._loadScript(s));o.length||this._leafMod(t)}else this._leafMod(t)},_leafMod:function(t){var o,i={exports:{}};t&&(o=t.apply(e,[i,i.exports,a,r,"",""])),o?o.__filename=this.name:o=!0,n._cached[this.name]=o,c(this.name)},_checkCycle:function(e,t){t||(t=[e]);var a,r,c=n._tree[e];if(!c)return!1;for(var o in c){if(-1!==t.indexOf(o))return t.unshift(o),console.warn("[WARNNING]","cycle require : "+t.join(" > ")),!0;if(a=t.slice(0),a.unshift(o),r=this._checkCycle(o,a))return!0}return!1},_loadScript:function(t){function o(t){var c=u._load_stack,o=!1;if(n._cached[t]&&(c.count++,o=u.name),c.total<=c.count){var i,s={exports:{}},l=u.name,d=l.replace(/[^\/]*$/,"");c.cb&&(i=c.cb.apply(e,[s,s.exports,a,r,l,d])),i?i.__filename=u.name:i=!0,n._cached[u.name]=i}return o}var i=n._cached[t],u=this,l=n._flag;if(i)return l=o(t),void(l!==!1&&c(l));if(i===!1)return void l[t].push(o);l[t]||(l[t]=[]),l[t].push(o),n._cached[t]=!1;var d=document.getElementsByTagName("head")[0].appendChild(document.createElement("script"));d.type="text/javascript",d.async="true",d.charset=this.charset,_&&!/\.css\.js$/.test(t)&&(t=t.replace(/\.js$/,".source.js"));var f=[this.base,t,"?m=1&",s];d.src=f.join("")}},t=t?t:"Cube",e[t]?console.log("window."+t+' already in using, replace the last "null" param in cube.js'):e[t]=n}(window,null);